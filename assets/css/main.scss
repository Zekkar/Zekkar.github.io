---
# Main SCSS file
---

@charset "utf-8";

// 引入 Google Fonts
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono&family=Noto+Sans+TC:wght@400;500;700&display=swap');

// --- 變數定義 (Muki.tw 風格靈感) ---

// 1. 品牌色 (Teal / 藍綠色系)
$primary-color: #00b894;       // 主色 (亮色模式用)
$primary-color-dark: #00896f;  // 深一點的主色 (Hover用)
$primary-color-light: #55efc4; // 淺一點的主色 (深色模式連結用)

// 2. 亮色模式色票
$text-color-light: #2d3436;    // 深灰，高對比但不刺眼
$background-color-light: #ffffff;
$light-gray: #f5f6fa;          // 用於次要背景

// 3. 覆寫 Minimal Mistakes 預設變數
$link-color: $primary-color;
$link-color-hover: $primary-color-dark;
$body-background-color: $background-color-light;
$text-color: $text-color-light;
$masthead-link-color: $text-color-light;
$masthead-link-color-hover: $primary-color;

// 字體
$sans-serif: "Noto Sans TC", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
$monospace: "JetBrains Mono", monospace;
$base-font-size: 16px;

@import "minimal-mistakes/skins/{{ site.minimal_mistakes_skin | default: 'default' }}";
@import "minimal-mistakes";

// --- 全域樣式調整 (亮色模式基底) ---

body {
  font-family: $sans-serif;
  letter-spacing: 0.02em; // 稍微增加字距，提升閱讀感
}

// 導覽列優化 (簡潔白底風格)
.masthead {
  background-color: #fff;
  border-bottom: 1px solid #eee;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);

  .masthead__inner-wrap {
    padding: 0.8rem 1rem;
    max-width: 1200px; // 限制最大寬度，避免太開
  }

  .site-title {
    font-weight: 700;
    font-size: 1.5rem;
    color: $text-color-light;
  }
  
  .greedy-nav {
    background: #fff;
    a {
      color: $text-color-light;
      font-weight: 500;
      &:hover {
        color: $primary-color;
      }
    }
    .visible-links a:before {
      background: $primary-color; // 下底線顏色
    }
  }
}

// 內容區塊留白
.page__content {
  .archive__item {
    margin-bottom: 2em;
    padding: 1.5em;
    border-radius: 8px;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    border: 1px solid transparent; // 預留邊框空間

    // 卡片式列表效果 (滑鼠懸停時)
    &:hover {
      background-color: #fff;
      box-shadow: 0 5px 20px rgba(0,0,0,0.08);
      transform: translateY(-3px);
      border-color: #eee;
    }

    // 移除預設的 teaser 圖片左浮動，改為上方或更現代的佈局，這裡保持預設但優化間距
    .archive__item-teaser {
      border-radius: 6px;
    }
  }

  h1, h2, h3 {
    font-weight: 700;
    color: #2d3436;
    margin-top: 2em;
  }
  
  h2 {
    border-bottom: 2px solid $primary-color;
    padding-bottom: 0.3em;
    display: inline-block; // 底線只跟著文字長度
    margin-bottom: 1em;
    width: 100%; // 還是讓它佔滿一行比較整齊，或者改為 block
    display: block;
  }
  
  p {
    line-height: 1.8;
    color: #4a4a4a;
    font-size: 1.05rem;
  }
}

// 按鈕優化
.btn {
  border-radius: 30px; // 圓潤風格
  font-weight: 600;
  &--primary {
    background-color: $primary-color;
    &:hover {
      background-color: $primary-color-dark;
    }
  }
}

// --- 深色模式樣式 (高對比優化) ---
[data-theme="dark"] {
  // 變數
  --background-color: #121212; // 真・深灰背景
  --surface-color: #1e1e1e;    // 卡片/區塊背景
  --text-color: #e0e0e0;       // 主文字
  --text-muted: #a0a0a0;       // 次要文字
  --link-color: #55efc4;       // 亮青色，確保對比度
  --link-hover: #81ecec;
  --border-color: #333;
  --code-bg: #2d2d2d;
  
  background-color: var(--background-color);
  color: var(--text-color);

  // 導覽列
  .masthead {
    background-color: var(--surface-color);
    border-bottom-color: var(--border-color);
    box-shadow: none;

    .site-title {
      color: var(--text-color);
    }

    .greedy-nav {
      background: var(--surface-color);
      a {
        color: var(--text-color);
        &:hover {
          color: var(--link-color);
        }
      }
    }
  }

  // 內容區
  .page__content {
    h1, h2, h3, h4, h5, h6 {
      color: #fff; // 標題更亮
    }

    h2 {
      border-bottom-color: var(--link-color);
    }

    p, li, td {
      color: var(--text-color);
    }

    a {
      color: var(--link-color);
      &:hover {
        color: var(--link-hover);
      }
    }
    
    // 卡片樣式適配
    .archive__item {
      &:hover {
        background-color: var(--surface-color);
        box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        border-color: var(--border-color);
      }
    }
    
    .archive__item-title a {
        color: var(--link-color);
    }
    
    .archive__item-excerpt {
        color: var(--text-muted);
    }
  }
  
  // 側邊欄與其他元素
  .sidebar {
    background-color: var(--background-color);
    .nav__list .nav__items {
        color: var(--text-color);
        a {
            color: var(--text-color);
            &:hover {
                color: var(--link-color);
            }
        }
    }
  }
  
  .author__name { color: #fff; }
  .author__bio { color: var(--text-muted); }

  // 表格與程式碼
  table {
    thead { background-color: var(--surface-color); }
    th, td { border-color: var(--border-color); color: var(--text-color); }
    tbody tr:nth-child(odd) { background-color: rgba(255,255,255,0.03); }
  }

  pre, code {
    background-color: var(--code-bg);
    color: #f1f1f1;
  }
  
  .page__footer {
    background-color: #000;
    color: var(--text-muted);
    
    footer .social-icons a {
        color: var(--text-muted);
        &:hover { color: var(--link-color); }
    }
  }
  
  // 搜尋
  .search-content {
      background-color: var(--background-color);
      .search-input {
          background-color: var(--surface-color);
          color: var(--text-color);
          border-color: var(--border-color);
      }
  }
}

// --- 切換按鈕 (Theme Toggle) ---
.theme-toggle {
  position: fixed;
  bottom: 30px;
  right: 30px;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  border: none;
  background: $primary-color;
  color: #fff;
  font-size: 1.4rem;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0, 184, 148, 0.4);
  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;

  &:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 16px rgba(0, 184, 148, 0.6);
  }
}

[data-theme="dark"] .theme-toggle {
  background: #ffbd59; // 溫暖的黃色，代表月亮/燈光
  color: #121212;
  box-shadow: 0 4px 12px rgba(255, 189, 89, 0.4);

  &:hover {
    box-shadow: 0 6px 16px rgba(255, 189, 89, 0.6);
  }
}

/* 響應式影片容器 */
.responsive-video-container {
  position: relative;
  padding-bottom: 56.25%;
  height: 0;
  overflow: hidden;
  max-width: 100%;
  margin: 2em 0;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);

  iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
  }
}
